{"ast":null,"code":"import _defineProperty from\"C:/Users/nguye/OneDrive/Desktop/react_fe/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/nguye/OneDrive/Desktop/react_fe/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/nguye/OneDrive/Desktop/react_fe/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useRef}from'react';import{Modal,Button}from\"react-bootstrap\";import axios from'axios';import Swal from\"sweetalert2\";import Footer from\"./../../layouts/admin/Footer\";import Navbar from\"./../../layouts/admin/Navbar\";import Sidebar from\"./../../layouts/admin/Sidebar\";import Navigation from'../../layouts/admin/Navigation';import Loading from'../../layouts/admin/Loading';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Customers(){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];//Loading\nvar _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),customers=_useState4[0],setCustomers=_useState4[1];// fetch customers\nvar _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),pagination=_useState6[0],setPagination=_useState6[1];// Phân trang\nvar _useState7=useState('Thêm mới customer'),_useState8=_slicedToArray(_useState7,2),titleForm=_useState8[0],setTitleForm=_useState8[1];//Title form\nvar _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),checkedStatus=_useState10[0],setCheckedStatus=_useState10[1];//Check status user form\nvar _useState11=useState(true),_useState12=_slicedToArray(_useState11,2),isResearch=_useState12[0],setIsResearch=_useState12[1];// kiểm tra data có phải đã được tìm kiếm hay không\nvar _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),isEdit=_useState14[0],setIsEdit=_useState14[1];var _useState15=useState({// Customer\ncustomer_id:'',customer_name:'',email:'',address:'',tel_num:'',error_list:[]}),_useState16=_slicedToArray(_useState15,2),customer=_useState16[0],setCustomer=_useState16[1];//Chỉnh sửa trên table\nvar editRowCustomer=function editRowCustomer(id,name,tel,address,email,is_active){setCustomer({customer_name:name,email:email,tel_num:tel,address:address,customer_id:id,error_list:[]});setCheckedStatus(is_active);setIsEdit(id);};var handleInputEditRow=function handleInputEditRow(e){setCustomer(_objectSpread(_objectSpread({},customer),{},_defineProperty({},e.target.name,e.target.value)));console.log(customer);};var _useState17=useState({customer_name:'',email:'',is_active:'',address:''}),_useState18=_slicedToArray(_useState17,2),inputSearch=_useState18[0],setInputSearch=_useState18[1];//Form search\n//Chọn file csv\nvar inputFileRef=useRef(null);var chooseFile=function chooseFile(){inputFileRef.current.click();};//export CSV \nvar exportCsv=function exportCsv(){var formData=new FormData();formData.append('customer_name',inputSearch.customer_name);formData.append('email',inputSearch.email);formData.append('address',inputSearch.address);formData.append('is_active',inputSearch.is_active);console.log(formData);axios.post(\"api/customers/export/\",formData).then(function(res){console.log(res.data);var csvString=res.data;var a=window.document.createElement('a');a.setAttribute('href','data:text/csv; charset=utf-8,'+encodeURIComponent(csvString));a.setAttribute('download','customer.csv');a.click();});};//import CSV\nvar handleCsv=function handleCsv(e){// setFileCsv(e.target.files[0]);\nconsole.log(e.target.files[0]);if(e.target.files[0]){var fileCsv=e.target.files[0];Swal.fire({title:'Xác nhận?',text:\"Import CSV!\",icon:'question',showCancelButton:true,confirmButtonColor:'#3085d6',cancelButtonColor:'#d33',cancelButtonText:'Hủy',confirmButtonText:'OK'}).then(function(result){if(result.isConfirmed){setLoading(true);var formData=new FormData();formData.append('file',fileCsv);axios.post(\"api/customers/import/\",formData).then(function(res){console.log(res.data);if(res.data.status===200){console.log(res.data);Swal.fire('Import',res.data.message,'success');loadPage(numPage);setLoading(false);}else if(res.data.status===422){Swal.fire('Import',res.data.message,'error');setLoading(false);}else if(res.data.status===401){Swal.fire('Import',res.data.message,'error');setLoading(false);}else{Swal.fire('Import',res.data.message,'error');setLoading(false);}});e.target.value=\"\";}else{e.target.value=\"\";}});}};var numPage;// Số trang hiện tại\nvar callBackChildren=function callBackChildren(num){var formData=new FormData();formData.append('customer_name',inputSearch.customer_name);formData.append('email',inputSearch.email);formData.append('address',inputSearch.address);formData.append('is_active',inputSearch.is_active);numPage=num;console.log(numPage);loadPage(numPage,formData);};//input search\nvar handleInputSearch=function handleInputSearch(e){setInputSearch(_objectSpread(_objectSpread({},inputSearch),{},_defineProperty({},e.target.name,e.target.value)));console.log(inputSearch);};//Xóa tìm kiếm\nvar handleDeleteSearch=function handleDeleteSearch(){setIsResearch(false);setInputSearch({customer_name:'',email:'',is_active:'',address:''});document.getElementById(\"SEARCH-FORM\").reset();reloadPage(numPage);};//Tìm kiếm\nvar handleKeyDown=function handleKeyDown(e){if(e.key==='Enter'){e.preventDefault();filterData();console.log(inputSearch);}};var submitSearch=function submitSearch(e){e.preventDefault();filterData();console.log(inputSearch);};var filterData=function filterData(){setIsResearch(true);loadPage(1);};//Tìm kiếm\nvar research=function research(numPage){var formData=new FormData();formData.append('customer_name',inputSearch.customer_name);formData.append('email',inputSearch.email);formData.append('address',inputSearch.address);formData.append('is_active',inputSearch.is_active);setLoading(true);axios.post(\"api/customers/search?page=\".concat(numPage),formData).then(function(res){console.log(res);if(res.data.status===200){setCustomers(res.data.customers.data);setPagination({current_page:res.data.customers.current_page,last_page:res.data.customers.last_page,to:res.data.customers.to,total:res.data.customers.total,from:res.data.customers.from});setLoading(false);}else{Swal.fire('Tìm kiếm',res.data.message,'warning');setLoading(false);}});};//Call api lấy dsach\nvar loadPage=function loadPage(numPage){if(!isResearch){reloadPage(numPage);}else{research(numPage);}};//Reload \nvar reloadPage=function reloadPage(numPage){setLoading(true);axios.get(\"/api/customers?page=\".concat(numPage)).then(function(res){if(res.data.status===200){console.log(res.data);setCustomers(res.data.customers.data);setPagination({current_page:res.data.customers.current_page,last_page:res.data.customers.last_page,to:res.data.customers.to,total:res.data.customers.total,from:res.data.customers.from});setLoading(false);}else{Swal.fire('Tìm kiếm',res.data.message,'warning');setLoading(false);}});};//Load data sau khi load trang\nuseEffect(function(){loadPage(numPage);},[]);//set state input\nvar handleInput=function handleInput(e){setCustomer(_objectSpread(_objectSpread({},customer),{},_defineProperty({},e.target.name,e.target.value)));console.log(customer);console.log(checkedStatus);};//Reset input form\nvar resetInput=function resetInput(){setCustomer({customer_id:'',customer_name:'',email:'',address:'',tel_num:'',error_list:[]});setCheckedStatus(false);// document.getElementById('USER_FORM').reset()\n};var handleClickStatus=function handleClickStatus(){return setCheckedStatus(!checkedStatus);};var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),show=_useState20[0],setShow=_useState20[1];//Đóng modal\nvar handleClose=function handleClose(){resetInput();setShow(false);setIsEdit(null);};// Mở modal\nvar handleShow=function handleShow(id){// resetInput()\nif(id){axios.get(\"/api/customers/\".concat(id)).then(function(res){console.log(res.data);if(res.data.status===200){setShow(true);setTitleForm('Chỉnh sửa customer');setCustomer({customer_id:res.data.customer.customer_id,customer_name:res.data.customer.customer_name,email:res.data.customer.email,tel_num:res.data.customer.tel_num,address:res.data.customer.address,error_list:[]});setCheckedStatus(res.data.customer.is_active);}else if(res.data.status===404){Swal.fire('Lỗi',res.data.message,'warning');loadPage(numPage);}});}else{resetInput();setTitleForm('Thêm mới customer');setShow(true);}};//Thêm mới customer\nvar submitCustomer=function submitCustomer(e){e.preventDefault();var data={email:customer.email,customer_name:customer.customer_name,address:customer.address,tel_num:customer.tel_num,is_active:checkedStatus};axios.post(\"/api/customers/store\",data).then(function(res){if(res.data.status===200){Swal.fire('Thêm mới',res.data.message,'success');resetInput();setShow(false);loadPage(numPage);}else if(res.data.status===500){Swal.fire('Thêm mới',res.data.message,'error');loadPage(numPage);}else{setCustomer(_objectSpread(_objectSpread({},customer),{},{error_list:res.data.validation_errors}));}});};//Cập nhật customer\nvar submitUpdateCustomer=function submitUpdateCustomer(e){e.preventDefault();var data={email:customer.email,customer_name:customer.customer_name,address:customer.address,tel_num:customer.tel_num,is_active:checkedStatus};axios.post(\"/api/customers/\".concat(customer.customer_id,\"/update\"),data).then(function(res){if(res.data.status===200){Swal.fire('Cập nhật',res.data.message,'success');resetInput();setShow(false);setIsEdit(null);loadPage(numPage);}else if(res.data.status===401||res.data.status===500||res.data.status===404){resetInput();setShow(false);setIsEdit(null);loadPage(numPage);Swal.fire('Cập nhật',res.data.message,'error');}else{setCustomer(_objectSpread(_objectSpread({},customer),{},{error_list:res.data.validation_errors}));}});};//RENDER\nvar tableHTML=\"\";if(loading){tableHTML=/*#__PURE__*/_jsx(\"td\",{colSpan:6,children:/*#__PURE__*/_jsx(Loading,{})});}else if(customers.length>0){var numberCustomer=pagination.current_page*10;tableHTML=customers===null||customers===void 0?void 0:customers.map(function(cus,idx){var numUser=idx+1+numberCustomer-10;return/*#__PURE__*/_jsxs(\"tr\",{id:numUser,children:[/*#__PURE__*/_jsx(\"td\",{children:numUser}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"p\",{children:isEdit===cus.customer_id?/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"customer_name\",onChange:handleInputEditRow,value:customer.customer_name}):/*#__PURE__*/_jsx(\"span\",{children:cus.customer_name})}),\"  \",/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:isEdit===cus.customer_id?customer.error_list.customer_name:''})]}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[isEdit===cus.customer_id?/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"email\",onChange:handleInputEditRow,value:customer.email}):/*#__PURE__*/_jsx(\"span\",{children:cus.email}),\"  \"]}),\"  \",/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:isEdit===cus.customer_id?customer.error_list.email:''})]}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[isEdit===cus.customer_id?/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"tel_num\",onChange:handleInputEditRow,value:customer.tel_num}):/*#__PURE__*/_jsx(\"span\",{children:cus.tel_num}),\"  \"]}),\"  \",/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:isEdit===cus.customer_id?customer.error_list.tel_num:''})]}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[isEdit===cus.customer_id?/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"address\",onChange:handleInputEditRow,value:customer.address}):/*#__PURE__*/_jsx(\"span\",{children:cus.address}),\" \"]}),\"  \",/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:isEdit===cus.customer_id?customer.error_list.address:''})]}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:isEdit===cus.customer_id?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"icon_btn\",onClick:submitUpdateCustomer,children:/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-check\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"icon_btn\",onClick:function onClick(){return setIsEdit(null);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-x\"})})]}):/*#__PURE__*/_jsx(\"span\",{className:\"icon_btn\",onClick:function onClick(){return editRowCustomer(cus.customer_id,cus.customer_name,cus.tel_num,cus.address,cus.email,cus.is_active);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-pencil\"})})})]},idx);});}else{tableHTML=/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{colSpan:6,children:\"Kh\\xF4ng c\\xF3 d\\u1EEF li\\u1EC7u\"}),\" \"]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"sb-nav-fixed\",children:[/*#__PURE__*/_jsx(\"form\",{children:/*#__PURE__*/_jsxs(Modal,{show:show,onHide:handleClose,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:titleForm})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-100\",children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"T\\xEAn\"}),/*#__PURE__*/_jsxs(\"th\",{scope:\"col\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"customer_name\",className:\"form-control\",value:customer.customer_name,onChange:handleInput,placeholder:\"Nh\\u1EADp h\\u1ECD t\\xEAn\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-alert\",children:customer.error_list.customer_name})]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:\"Email\"}),/*#__PURE__*/_jsxs(\"th\",{scope:\"col\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",className:\"form-control\",value:customer.email,onChange:handleInput,placeholder:\"Nh\\u1EADp \\u0111\\u1ECBa ch\\u1EC9 email\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-alert\",children:customer.error_list.email})]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:\"\\u0110i\\u1EC7n tho\\u1EA1i\"}),/*#__PURE__*/_jsxs(\"th\",{scope:\"col\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"tel_num\",onChange:handleInput,value:customer.tel_num,className:\"form-control\",placeholder:\"Nh\\u1EADp s\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-alert\",children:customer.error_list.tel_num})]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:\"\\u0110\\u1ECBa ch\\u1EC9\"}),/*#__PURE__*/_jsxs(\"th\",{scope:\"col\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"address\",onChange:handleInput,value:customer.address,className:\"form-control\",placeholder:\"Nh\\u1EADp \\u0111\\u1ECBa ch\\u1EC9\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-alert\",children:customer.error_list.address})]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:\"Tr\\u1EA1ng th\\xE1i\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:/*#__PURE__*/_jsx(\"input\",{className:\"form-check-input\",name:\"is_active\",checked:checkedStatus,onClick:handleClickStatus,type:\"checkbox\"})})]})]})}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:handleClose,children:\"\\u0110\\xF3ng\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:customer.customer_id!==''?submitUpdateCustomer:submitCustomer,children:\"L\\u01B0u\"})]})]})}),/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{id:\"layoutSidenav\",children:[/*#__PURE__*/_jsx(Sidebar,{}),/*#__PURE__*/_jsxs(\"div\",{id:\"layoutSidenav_content\",children:[/*#__PURE__*/_jsx(\"main\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid px-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card mb-4  mt-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-table me-1\"}),\"Danh s\\xE1ch kh\\xE1ch h\\xE0ng\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary btn-search\",onClick:function onClick(){return handleShow();},children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-plus\"}),\" Th\\xEAm m\\u1EDBi\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"box-search mt-1\",children:/*#__PURE__*/_jsxs(\"form\",{action:\"\",id:\"SEARCH-FORM\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row p-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3 mb-1\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"T\\xEAn\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"name\",name:\"customer_name\",onChange:handleInputSearch,onKeyPress:handleKeyDown,className:\"form-control\",placeholder:\"Nh\\u1EADp h\\u1ECD t\\xEAn\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3 mb-1\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"email\",name:\"email\",onChange:handleInputSearch,onKeyPress:handleKeyDown,className:\"form-control\",placeholder:\"Nh\\u1EADp email\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3  mb-1\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"status\",children:\"Tr\\u1EA1ng th\\xE1i\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-select\",id:\"status\",onChange:handleInputSearch,name:\"is_active\",\"aria-label\":\"Default select example\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Ch\\u1ECDn tr\\u1EA1ng th\\xE1i\"}),/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"\\u0110ang ho\\u1EA1t \\u0111\\u1ED9ng\"}),/*#__PURE__*/_jsx(\"option\",{value:\"0\",children:\"T\\u1EA1m kh\\xF3a\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3 mb-1\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"\\u0110\\u1ECBa ch\\u1EC9\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"name\",name:\"address\",onChange:handleInputSearch,onKeyPress:handleKeyDown,className:\"form-control\",placeholder:\"Nh\\u1EADp \\u0111\\u1ECBa ch\\u1EC9\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-12 mb-1 box-btn-search mt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary btn-search m-1\",onClick:submitSearch,children:/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-magnifying-glass\"})}),\"\\xA0\",/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"btn btn-danger btn-search m-1\",onClick:handleDeleteSearch,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-x\"}),\" X\\xF3a t\\xECm\"]}),\"\\xA0\",/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"btn btn-success btn-search m-1\",onClick:chooseFile,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-file-import\"}),\" Import CSV\"]}),\"\\xA0\",/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"btn btn-success btn-search m-1\",onClick:exportCsv,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-file-arrow-down\"}),\" Export CSV\"]}),\"\\xA0\"]})]}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"product_image\",hidden:true,accept:\".csv\",onChange:handleCsv,className:\"mb-3\",ref:inputFileRef})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"table-responsive\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{children:\"H\\u1ECD t\\xEAn\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0110i\\u1EC7n tho\\u1EA1i\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0110\\u1ECBa ch\\u1EC9\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-center\",children:\"Thao t\\xE1c\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"box-input\",children:tableHTML})]}),/*#__PURE__*/_jsx(Navigation,{Paginate:pagination,childToParent:callBackChildren})]})]})]})})}),/*#__PURE__*/_jsx(Footer,{})]})]})]});}export default Customers;","map":{"version":3,"sources":["C:/Users/nguye/OneDrive/Desktop/react_fe/src/components/admin/Customers.js"],"names":["React","useState","useEffect","useRef","Modal","Button","axios","Swal","Footer","Navbar","Sidebar","Navigation","Loading","Customers","loading","setLoading","customers","setCustomers","pagination","setPagination","titleForm","setTitleForm","checkedStatus","setCheckedStatus","isResearch","setIsResearch","isEdit","setIsEdit","customer_id","customer_name","email","address","tel_num","error_list","customer","setCustomer","editRowCustomer","id","name","tel","is_active","handleInputEditRow","e","target","value","console","log","inputSearch","setInputSearch","inputFileRef","chooseFile","current","click","exportCsv","formData","FormData","append","post","then","res","data","csvString","a","window","document","createElement","setAttribute","encodeURIComponent","handleCsv","files","fileCsv","fire","title","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","cancelButtonText","confirmButtonText","result","isConfirmed","status","message","loadPage","numPage","callBackChildren","num","handleInputSearch","handleDeleteSearch","getElementById","reset","reloadPage","handleKeyDown","key","preventDefault","filterData","submitSearch","research","current_page","last_page","to","total","from","get","handleInput","resetInput","handleClickStatus","show","setShow","handleClose","handleShow","submitCustomer","validation_errors","submitUpdateCustomer","tableHTML","length","numberCustomer","map","cus","idx","numUser"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useRef} from 'react'\nimport { Modal, Button } from \"react-bootstrap\";\nimport axios from 'axios';\nimport Swal from \"sweetalert2\";\n\nimport Footer  from \"./../../layouts/admin/Footer\";\nimport Navbar  from \"./../../layouts/admin/Navbar\";\nimport Sidebar  from \"./../../layouts/admin/Sidebar\";\nimport Navigation from '../../layouts/admin/Navigation';\nimport Loading from '../../layouts/admin/Loading';\n\nfunction Customers() {\n\n    const [loading, setLoading] = useState(true); //Loading\n    const [customers, setCustomers] = useState([]); // fetch customers\n    const [pagination, setPagination] = useState({});// Phân trang\n    const [titleForm, setTitleForm] = useState('Thêm mới customer') //Title form\n    const [checkedStatus, setCheckedStatus] = useState(false) //Check status user form\n    const [isResearch, setIsResearch] = useState(true) // kiểm tra data có phải đã được tìm kiếm hay không\n    const [isEdit, setIsEdit] = useState(null);\n    const [customer, setCustomer] = useState({  // Customer\n        customer_id: '',\n        customer_name: '',\n        email:  '',\n        address:  '',\n        tel_num:  '',\n        error_list: []\n    });\n\n    //Chỉnh sửa trên table\n    const editRowCustomer = (id, name, tel, address, email, is_active) => {\n        setCustomer({\n            customer_name:  name,\n            email:  email,\n            tel_num: tel,\n            address:  address,\n            customer_id:  id,\n            error_list: []\n        })\n        setCheckedStatus(is_active)\n        setIsEdit(id)\n    }\n\n    const handleInputEditRow = (e) => {\n        setCustomer({ ...customer, [e.target.name] : e.target.value })\n        console.log(customer)\n    }\n\n    const [inputSearch, setInputSearch] = useState({\n        customer_name:  '',\n        email:  '',\n        is_active: '',\n        address:  '',\n    }) //Form search\n\n    //Chọn file csv\n    const inputFileRef = useRef( null );\n    const chooseFile = () => {\n        inputFileRef.current.click();\n    }\n\n    //export CSV \n    const exportCsv = () => {\n\n        const formData = new FormData();\n        formData.append('customer_name', inputSearch.customer_name);\n        formData.append('email', inputSearch.email);\n        formData.append('address', inputSearch.address);\n        formData.append('is_active', inputSearch.is_active);\n        console.log(formData)\n        \n        axios.post(`api/customers/export/`, formData).then(res => {\n\n            console.log(res.data)\n            var csvString = res.data;\n\n            var a = window.document.createElement('a');\n            a.setAttribute('href', 'data:text/csv; charset=utf-8,' + encodeURIComponent(csvString));\n            a.setAttribute('download', 'customer.csv');\n            a.click();\n        });\n    }\n\n    //import CSV\n    const handleCsv = (e) => {\n        \n        // setFileCsv(e.target.files[0]);\n        console.log(e.target.files[0])\n        if(e.target.files[0]){\n            const fileCsv = e.target.files[0];\n            Swal.fire({\n                title: 'Xác nhận?',\n                text: \"Import CSV!\",\n                icon: 'question',\n                showCancelButton: true,\n                confirmButtonColor: '#3085d6',\n                cancelButtonColor: '#d33',\n                cancelButtonText: 'Hủy',\n                confirmButtonText: 'OK'\n            }).then((result) => {\n                if (result.isConfirmed) {\n                    setLoading(true);\n\n                    const formData = new FormData();\n                    formData.append('file', fileCsv  );\n\n                    axios.post(`api/customers/import/`, formData).then(res => {\n                        console.log(res.data)\n                        if (res.data.status === 200) {\n                            console.log(res.data)\n                            Swal.fire(\n                                'Import',\n                                res.data.message,\n                                'success'\n                            )\n                            loadPage(numPage)\n                            setLoading(false);\n                        }\n                        else if(res.data.status === 422){\n                            Swal.fire(\n                                'Import',\n                                res.data.message,\n                                'error'\n                              )\n                              setLoading(false);\n                        }\n                        else if(res.data.status === 401){\n                            Swal.fire(\n                                'Import',\n                                res.data.message,\n                                'error'\n                              )\n                              setLoading(false);\n                        }\n                        else {\n                            Swal.fire(\n                                'Import',\n                                res.data.message,\n                                'error'\n                              )\n                              setLoading(false);\n                        }\n                    });\n                    e.target.value = \"\"\n                }\n                else{\n                    e.target.value = \"\"\n                }\n            })\n        }\n    };\n\n    var numPage; // Số trang hiện tại\n    const callBackChildren = (num) => {\n        const formData = new FormData();\n        formData.append('customer_name', inputSearch.customer_name);\n        formData.append('email', inputSearch.email);\n        formData.append('address', inputSearch.address);\n        formData.append('is_active', inputSearch.is_active);\n        numPage = num\n        console.log(numPage)\n        loadPage(numPage, formData)\n    }\n\n    //input search\n    const handleInputSearch = (e) => {\n        setInputSearch({ ...inputSearch, [e.target.name]: e.target.value })\n        console.log(inputSearch)\n    }\n\n    //Xóa tìm kiếm\n    const handleDeleteSearch = () => {\n        setIsResearch(false)\n        setInputSearch({\n            customer_name:  '',\n            email:  '',\n            is_active: '',\n            address:  '',\n        })\n        document.getElementById(\"SEARCH-FORM\").reset();\n        reloadPage(numPage)\n    }\n    \n    //Tìm kiếm\n    const handleKeyDown = (e) => {\n        if (e.key === 'Enter') {\n            e.preventDefault()\n            filterData()\n            console.log(inputSearch)\n          }\n    }    \n    const submitSearch = (e) => {\n        e.preventDefault()\n        filterData()\n        console.log(inputSearch)\n    }\n\n    const filterData = () => {\n\n        setIsResearch(true)\n        loadPage(1)\n       \n    }\n\n    //Tìm kiếm\n    const research = (numPage) => {\n\n        const formData = new FormData();\n        formData.append('customer_name', inputSearch.customer_name);\n        formData.append('email', inputSearch.email);\n        formData.append('address', inputSearch.address);\n        formData.append('is_active', inputSearch.is_active);\n\n        setLoading(true);\n        axios.post(`api/customers/search?page=${numPage}`, formData).then(res => {\n            console.log(res)\n            if ( res.data.status === 200) {\n                setCustomers(res.data.customers.data)\n                setPagination({\n                    current_page: res.data.customers.current_page,\n                    last_page: res.data.customers.last_page,\n                    to: res.data.customers.to,\n                    total: res.data.customers.total,\n                    from: res.data.customers.from\n                })\n                setLoading(false);\n            }\n            else {\n                Swal.fire('Tìm kiếm', res.data.message, 'warning')\n                setLoading(false);\n            }\n        });\n    }\n\n    //Call api lấy dsach\n    const loadPage = (numPage) => {\n\n        if (!isResearch) {\n            reloadPage(numPage)\n        }\n        else{\n\n            research(numPage)\n        }\n    }\n\n    //Reload \n    const reloadPage = (numPage) => {\n        setLoading(true);\n        axios.get(`/api/customers?page=${numPage}`).then(res => {\n            if(res.data.status === 200){\n                console.log(res.data)\n                setCustomers(res.data.customers.data)\n                setPagination({\n                    current_page: res.data.customers.current_page,\n                    last_page: res.data.customers.last_page,\n                    to: res.data.customers.to,\n                    total: res.data.customers.total,\n                    from: res.data.customers.from\n                })\n                setLoading(false);\n            }\n            else{\n                Swal.fire('Tìm kiếm', res.data.message, 'warning')\n                setLoading(false);\n            }\n        }); \n    }\n\n    //Load data sau khi load trang\n    useEffect(() =>{\n        loadPage(numPage);\n    }, []);\n\n    //set state input\n    const handleInput = (e) => {\n        setCustomer({ ...customer, [e.target.name]: e.target.value })\n        console.log(customer)\n        console.log(checkedStatus)\n    }\n\n    //Reset input form\n    const resetInput = () => {\n        setCustomer({\n            customer_id: '',\n            customer_name:  '',\n            email:  '',\n            address: '',\n            tel_num: '',\n            error_list: [] \n        })\n        setCheckedStatus(false)\n        // document.getElementById('USER_FORM').reset()\n    }\n\n    const handleClickStatus= () => setCheckedStatus(!checkedStatus)\n\n\n    const [show, setShow] = useState(false);\n\n    //Đóng modal\n    const handleClose = () => {\n        resetInput()\n        setShow(false)\n        setIsEdit(null)\n    };\n    // Mở modal\n    const handleShow = (id) => {\n         // resetInput()\n         if(id) {\n\n            axios.get(`/api/customers/${id}`).then(res => {\n                console.log(res.data)\n                if(res.data.status === 200){\n                    setShow(true)\n                    setTitleForm('Chỉnh sửa customer')\n                    setCustomer({\n                        customer_id: res.data.customer.customer_id,\n                        customer_name: res.data.customer.customer_name,\n                        email: res.data.customer.email,\n                        tel_num: res.data.customer.tel_num,\n                        address: res.data.customer.address,\n                        error_list: []\n                    })\n                    setCheckedStatus(res.data.customer.is_active)\n                }\n                else if(res.data.status === 404){\n                    Swal.fire('Lỗi', res.data.message, 'warning')\n                    loadPage(numPage)\n                }\n            }); \n        }\n        else{\n            resetInput()\n            setTitleForm('Thêm mới customer')\n            setShow(true)\n        }\n    };\n\n    //Thêm mới customer\n    const submitCustomer = (e) => {\n\n        e.preventDefault()\n        const data = {\n            email: customer.email,\n            customer_name: customer.customer_name,\n            address: customer.address,\n            tel_num: customer.tel_num,\n            is_active: checkedStatus,\n        }\n\n        axios.post(`/api/customers/store`, data).then(res => {\n            if(res.data.status === 200){\n                Swal.fire('Thêm mới', res.data.message, 'success')\n                resetInput()\n                setShow(false)\n                loadPage(numPage)\n            }\n            else if(res.data.status === 500){\n                Swal.fire('Thêm mới', res.data.message, 'error')\n                loadPage(numPage)\n            }\n            else{\n                setCustomer({...customer, error_list: res.data.validation_errors})\n            }\n        }); \n\n    }\n\n    //Cập nhật customer\n    const submitUpdateCustomer = (e) => {\n\n        e.preventDefault()\n        const data = {\n            email: customer.email,\n            customer_name: customer.customer_name,\n            address: customer.address,\n            tel_num: customer.tel_num,\n            is_active: checkedStatus,\n        }\n\n        axios.post(`/api/customers/${customer.customer_id}/update`, data).then(res => {\n            if(res.data.status === 200){\n                Swal.fire('Cập nhật', res.data.message, 'success')\n                resetInput()\n                setShow(false)\n                setIsEdit(null)\n                loadPage(numPage)\n            }\n            else if(res.data.status === 401 || res.data.status === 500 || res.data.status === 404){\n                resetInput()\n                setShow(false)\n                setIsEdit(null)\n                loadPage(numPage)\n                Swal.fire('Cập nhật', res.data.message, 'error')\n            }\n            else{\n                setCustomer({...customer, error_list: res.data.validation_errors})\n            }\n        }); \n    }\n\n     //RENDER\n     var tableHTML = \"\"\n     if(loading){\n         tableHTML =  (\n             <td colSpan={6}>\n                 <Loading />\n             </td>\n         )\n     }\n     else if(customers.length > 0) {\n            let numberCustomer = pagination.current_page * 10;\n            tableHTML = \n            customers?.map((cus, idx) => {\n                let numUser = idx + 1 + numberCustomer - 10 ;\n                return (\n                <tr key={idx} id={numUser}>\n                    <td>{numUser}</td>\n                    <td> \n                        <p>{isEdit === cus.customer_id ?  <input type=\"text\"  name=\"customer_name\" onChange={handleInputEditRow} value={customer.customer_name} />\n                         :\n                         <span>{cus.customer_name}</span> }</p>  <p className='text-danger'>{isEdit === cus.customer_id ? customer.error_list.customer_name : ''}</p>\n                    </td>\n                    <td> \n                        <p>{isEdit === cus.customer_id ? <input type=\"text\" name=\"email\" onChange={handleInputEditRow}  value={customer.email} /> \n                        :\n                         <span>{cus.email}</span> }  </p>  <p className='text-danger'>{isEdit === cus.customer_id ? customer.error_list.email : ''}</p>\n                    </td>\n                    <td> \n                        <p>{isEdit === cus.customer_id ? <input type=\"text\"  name=\"tel_num\" onChange={handleInputEditRow} value={customer.tel_num} /> \n                        : \n                        <span>{cus.tel_num}</span> }  </p>  <p className='text-danger'>{isEdit === cus.customer_id ? customer.error_list.tel_num : ''}</p>\n                    </td>\n                    <td> \n                        <p>{isEdit === cus.customer_id ? <input type=\"text\" name=\"address\"  onChange={handleInputEditRow} value={customer.address} />\n                         :\n                          <span>{cus.address}</span> } </p>  <p className='text-danger'>{isEdit === cus.customer_id ? customer.error_list.address : ''}</p> \n                    </td>\n                    <td className=\"text-center\">\n                        { isEdit === cus.customer_id ?  \n                        <>\n                            <span className='icon_btn' onClick={submitUpdateCustomer}>\n                                <i className=\"fa-solid fa-check\"></i>\n                            </span> \n                            <span className='icon_btn' onClick={() => setIsEdit(null)}>\n                                <i className=\"fa-solid fa-x\"></i>\n                            </span>\n                        </>\n                         : \n                        <span className='icon_btn' onClick={() => editRowCustomer(cus.customer_id, cus.customer_name, cus.tel_num, cus.address, cus.email, cus.is_active)}>\n                            <i className=\"fa-solid fa-pencil\"></i>\n                        </span>\n                        }\n                       \n                        {/* <span className='icon_btn' onClick={() => handleShow(cus.customer_id)}>\n                            <i className=\"fa-solid fa-pen-fancy\"></i>\n                        </span> */}\n                    </td>\n                </tr>\n                );\n            })\n    }\n    else {\n        tableHTML = (\n            <tr ><td colSpan={6}>Không có dữ liệu</td> </tr>\n        )\n    }\n\n    return (        \n    <div className=\"sb-nav-fixed\">\n        <form>\n            <Modal show={show} onHide={handleClose}>\n                <Modal.Header closeButton>\n                <Modal.Title>{titleForm}</Modal.Title>\n                </Modal.Header>\n                <Modal.Body>\n\n                    <table className=\"w-100\">\n                        <tr>\n                            <th scope=\"col\">Tên</th>\n                            <th scope=\"col\">\n                                <input type=\"text\" name=\"customer_name\" className=\"form-control\"  value={customer.customer_name} \n                                onChange={handleInput} placeholder=\"Nhập họ tên\" />\n                                <span className=\"text-alert\">{customer.error_list.customer_name}</span>\n                            </th>\n                        </tr>\n                        <tr>\n                            <th scope=\"row\">Email</th>\n                            <th scope=\"col\">\n                                <input type=\"email\" name=\"email\"  className=\"form-control\" value={customer.email} \n                                onChange={handleInput} placeholder=\"Nhập địa chỉ email\" />\n                                <span className=\"text-alert\">{customer.error_list.email}</span>\n                            </th>\n                        </tr>\n                        <tr>\n                            <th scope=\"row\">Điện thoại</th>\n                            <th scope=\"col\">\n                                <input type=\"text\" name=\"tel_num\" onChange={handleInput} value={customer.tel_num} \n                                className=\"form-control\" placeholder=\"Nhập số điện thoại\" />\n                                <span className=\"text-alert\">{customer.error_list.tel_num}</span>\n                            </th>\n                        </tr>\n                        <tr>\n                            <th scope=\"row\">Địa chỉ</th>\n                            <th scope=\"col\">\n                                <input type=\"text\" name=\"address\" onChange={handleInput} value={customer.address} \n                                className=\"form-control\" placeholder=\"Nhập địa chỉ\" />\n                                <span className=\"text-alert\">{customer.error_list.address}</span>\n                            </th>\n                        </tr>\n                        <tr>\n                            <th scope=\"row\">Trạng thái</th>\n                            <th scope=\"col\">\n                            <input className=\"form-check-input\" name=\"is_active\" checked={checkedStatus} \n                            onClick={handleClickStatus} type=\"checkbox\"  />\n                            </th>\n                        </tr>\n                    </table>\n                </Modal.Body>\n                <Modal.Footer>\n                <Button variant=\"secondary\" onClick={handleClose}>\n                    Đóng\n                </Button>\n                <Button variant=\"primary\" onClick={customer.customer_id !== '' ?  submitUpdateCustomer : submitCustomer}>\n                    Lưu\n                </Button>\n                </Modal.Footer>\n            </Modal>\n        </form>\n\n            <Navbar />\n\n                <div id=\"layoutSidenav\">\n\n                <Sidebar />\n            \n                    <div id=\"layoutSidenav_content\">\n                        <main>\n                            <div className=\"container-fluid px-4\"> \n\n\n                                <div className=\"card mb-4  mt-4\">\n                                    <div className=\"card-header\">\n                                        <span>\n                                        <i className=\"fas fa-table me-1\"></i>\n                                        Danh sách khách hàng\n                                        </span>\n                                        \n                                        <button className=\"btn btn-primary btn-search\" onClick={() => handleShow()}>\n                                                    <i className=\"fa-solid fa-plus\"></i> Thêm mới</button>\n                                    </div>\n                                    <div className=\"card-body\">\n                                        \n                                <div className=\"box-search mt-1\">\n                                    <form action=\"\" id=\"SEARCH-FORM\">\n                                        <div className=\"row p-3\">\n                                            <div className=\"col-md-3 mb-1\">\n                                                <label htmlFor=\"name\">Tên</label>\n                                                <input type=\"text\" id=\"name\" name=\"customer_name\" onChange={handleInputSearch}  onKeyPress={handleKeyDown}\n                                                 className=\"form-control\" placeholder='Nhập họ tên'/>   \n                                            </div>\n                                            <div className=\"col-md-3 mb-1\">\n                                                <label htmlFor=\"email\">Email</label>\n                                                <input type=\"text\" id=\"email\" name=\"email\"  onChange={handleInputSearch} onKeyPress={handleKeyDown}\n                                                 className=\"form-control\" placeholder='Nhập email'/>   \n                                            </div>\n                                            <div className=\"col-md-3  mb-1\">\n                                                <label htmlFor=\"status\">Trạng thái</label>\n                                                <select className=\"form-select\" id=\"status\" onChange={handleInputSearch} name=\"is_active\" aria-label=\"Default select example\">\n                                                <option value=\"\" >Chọn trạng thái</option>\n                                                <option value=\"1\">Đang hoạt động</option>\n                                                <option value=\"0\">Tạm khóa</option>\n                                                </select>\n                                            </div>\n                                            <div className=\"col-md-3 mb-1\">\n                                                <label htmlFor=\"name\">Địa chỉ</label>\n                                                <input type=\"text\" id=\"name\" name=\"address\" onChange={handleInputSearch} onKeyPress={handleKeyDown}\n                                                 className=\"form-control\" placeholder='Nhập địa chỉ'/>   \n                                            </div>\n                                            <div className=\"col-md-12 mb-1 box-btn-search mt-4\">\n                                                <button type=\"button\" className=\"btn btn-primary btn-search m-1\" onClick={submitSearch}>\n                                                    <i className=\"fa-solid fa-magnifying-glass\"></i></button>\n                                                &nbsp;\n                                                <button type=\"button\" className=\"btn btn-danger btn-search m-1\" onClick={handleDeleteSearch}>\n                                                    <i className=\"fa-solid fa-x\"></i> Xóa tìm</button>\n                                                &nbsp;\n                                                <button type=\"button\" className=\"btn btn-success btn-search m-1\" onClick={chooseFile}>\n                                                    <i className=\"fa-solid fa-file-import\"></i> Import CSV</button> \n                                                &nbsp;\n                                                <button type=\"button\" className=\"btn btn-success btn-search m-1\" onClick={exportCsv}>\n                                                    <i className=\"fa-solid fa-file-arrow-down\"></i> Export CSV</button> \n                                                &nbsp;\n                                            </div>\n                                        </div>\n                                        <input type=\"file\" name=\"product_image\" hidden accept={\".csv\"} onChange={handleCsv} className=\"mb-3\" ref={inputFileRef} />\n                                    </form>\n                                    </div>\n                                        <div className=\"table-responsive\">\n                                            <table className=\"table\">\n                                                <thead>\n                                                    <tr>\n                                                        <th>#</th>\n                                                        <th>Họ tên</th>\n                                                        <th>Email</th>\n                                                        <th>Điện thoại</th>\n                                                        <th>Địa chỉ</th>\n                                                        <th className=\"text-center\">Thao tác</th>\n                                                    </tr>\n                                                </thead>\n                                                <tbody className=\"box-input\">\n                                                    { tableHTML }\n                                                </tbody>\n                                            </table>\n                                            <Navigation Paginate={pagination}  childToParent={callBackChildren}/>\n                                        </div>\n                                    </div>\n                                </div> \n                                \n                            </div>\n                        </main>\n\n                        <Footer />\n                    </div>\n            </div>\n        </div>\n    );\n}\n\nexport default Customers;"]},"metadata":{},"sourceType":"module"}